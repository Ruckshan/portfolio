{"pageProps":{"post":{"type_of":"article","id":646656,"title":"Get all blobs in given Azure container","description":"In last article, we tried to download single blob file from azure storage using Azure.Storage.Blobs....","readable_publish_date":"Mar 26","slug":"get-all-blobs-in-given-azure-container-aoe","path":"/imcmjha/get-all-blobs-in-given-azure-container-aoe","url":"https://dev.to/imcmjha/get-all-blobs-in-given-azure-container-aoe","comments_count":0,"public_reactions_count":6,"collection_id":null,"published_timestamp":"2021-03-26T12:49:12Z","positive_reactions_count":6,"cover_image":null,"social_image":"https://dev.to/social_previews/article/646656.png","canonical_url":"https://dev.to/imcmjha/get-all-blobs-in-given-azure-container-aoe","created_at":"2021-03-26T12:47:32Z","edited_at":null,"crossposted_at":null,"published_at":"2021-03-26T12:49:12Z","last_comment_at":"2021-03-26T12:49:12Z","reading_time_minutes":1,"tag_list":["csharp","azure","blob","storage"],"tags":["csharp","azure","blob","storage"],"body_html":"<p>In last article, we tried to download single blob file from azure storage using <code>Azure.Storage.Blobs</code>. This is the new library developed by <code>Microsoft</code> to replace depercated <code>Microsoft.WindowsAzure.Storage</code>. So let's get started.</p>\n\n<h2>\n  <a name=\"0-setting-up-the-context\" href=\"#0-setting-up-the-context\" class=\"anchor\">\n  </a>\n  0. Setting up the context\n</h2>\n\n<p>In this article, we will try to get all the blobs(images) stored on Azure blob storage in defined format i.e. <code>User_id/image.ext</code>.<br>\n</p>\n\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight plaintext\"><code>john_doe/image1.jpg\njohn_doe/profile.png\njane_doe/profile.PNG\n</code></pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode</title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"></path>\n</svg>\n\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode</title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>So if there are blobs with given name in Azue, we are trying to get all blobs for user id <code>john_doe</code></p>\n\n<h2>\n  <a name=\"1-install-nuget-package\" href=\"#1-install-nuget-package\" class=\"anchor\">\n  </a>\n  1. Install NuGet package\n</h2>\n\n<p>Install NuGet package <code>Azure.Storage.Blobs</code>. At the time of writing this, the latest version is 12.8.0.</p>\n\n<h2>\n  <a name=\"2-import-library\" href=\"#2-import-library\" class=\"anchor\">\n  </a>\n  2. Import library\n</h2>\n\n<p><code>using Azure.Storage.Blobs;</code></p>\n\n<h2>\n  <a name=\"3-get-connection-string\" href=\"#3-get-connection-string\" class=\"anchor\">\n  </a>\n  3. Get connection string\n</h2>\n\n<p>I assume you have Azure account and thus connection string to connect to Azure Blob Storage. Store this in a variable or constant based on your need.<br>\n</p>\n\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight plaintext\"><code>const string CONN_STRING = &lt;connection_string_from_azure_portal&gt;\nconst string BLOB_CONTAINER = &lt;blob_container_name&gt;\n</code></pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode</title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"></path>\n</svg>\n\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode</title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<h2>\n  <a name=\"1-now-the-final-thing\" href=\"#1-now-the-final-thing\" class=\"anchor\">\n  </a>\n  -1. Now the final thing\n</h2>\n\n<p>I will list all blobs(images) present in given container and have specified format.<br>\n</p>\n\n<div class=\"highlight js-code-highlight\">\n<pre class=\"highlight plaintext\"><code>string userId = \"john_doe\";\nvar allBlobs = container.GetBlobs(prefix: $\"{userId}\");\n</code></pre>\n<div class=\"highlight__panel js-actions-panel\">\n<div class=\"highlight__panel-action js-fullscreen-code-action\">\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"><title>Enter fullscreen mode</title>\n    <path d=\"M16 3h6v6h-2V5h-4V3zM2 3h6v2H4v4H2V3zm18 16v-4h2v6h-6v-2h4zM4 19h4v2H2v-6h2v4z\"></path>\n</svg>\n\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20px\" height=\"20px\" viewbox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"><title>Exit fullscreen mode</title>\n    <path d=\"M18 7h4v2h-6V3h2v4zM8 9H2V7h4V3h2v6zm10 8v4h-2v-6h6v2h-4zM8 15v6H6v-4H2v-2h6z\"></path>\n</svg>\n\n</div>\n</div>\n</div>\n\n\n\n<p>The above code will fetch all the blobs details present in container with given prefix(john_doe).</p>\n\n<p>If you want to download the blobs as well, <a href=\"https://dev.to/imcmjha/download-blob-from-azure-using-azure-storage-blobs-c0m\">this article</a> might be helpful.</p>\n\n<p>That's it. I hope this will be helpful. ðŸ™‚ </p>\n\n","body_markdown":"In last article, we tried to download single blob file from azure storage using `Azure.Storage.Blobs`. This is the new library developed by `Microsoft` to replace depercated `Microsoft.WindowsAzure.Storage`. So let's get started.\n\n## 0. Setting up the context\nIn this article, we will try to get all the blobs(images) stored on Azure blob storage in defined format i.e. `User_id/image.ext`.\n```\njohn_doe/image1.jpg\njohn_doe/profile.png\njane_doe/profile.PNG\n```\nSo if there are blobs with given name in Azue, we are trying to get all blobs for user id `john_doe`\n\n## 1. Install NuGet package \nInstall NuGet package `Azure.Storage.Blobs`. At the time of writing this, the latest version is 12.8.0.\n\n## 2. Import library\n`using Azure.Storage.Blobs;`\n\n## 3. Get connection string\nI assume you have Azure account and thus connection string to connect to Azure Blob Storage. Store this in a variable or constant based on your need.\n```\nconst string CONN_STRING = <connection_string_from_azure_portal>\nconst string BLOB_CONTAINER = <blob_container_name>\n```\n\n## -1. Now the final thing\nI will list all blobs(images) present in given container and have specified format.\n\n```\nstring userId = \"john_doe\";\nvar allBlobs = container.GetBlobs(prefix: $\"{userId}\");\n```\nThe above code will fetch all the blobs details present in container with given prefix(john_doe).\n\nIf you want to download the blobs as well, [this article](https://dev.to/imcmjha/download-blob-from-azure-using-azure-storage-blobs-c0m) might be helpful.\n\nThat's it. I hope this will be helpful. ðŸ™‚ ","user":{"name":"Chandra Mohan Jha","username":"imcmjha","twitter_username":null,"github_username":"imcmjha","website_url":null,"profile_image":"https://res.cloudinary.com/practicaldev/image/fetch/s--KVSsaKYe--/c_fill,f_auto,fl_progressive,h_640,q_auto,w_640/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/602221/a76e022e-fbbe-4c9f-bc35-58772e8abad7.png","profile_image_90":"https://res.cloudinary.com/practicaldev/image/fetch/s--qVqHHPg9--/c_fill,f_auto,fl_progressive,h_90,q_auto,w_90/https://dev-to-uploads.s3.amazonaws.com/uploads/user/profile_image/602221/a76e022e-fbbe-4c9f-bc35-58772e8abad7.png"},"readingTime":"2 min read"}},"__N_SSG":true}