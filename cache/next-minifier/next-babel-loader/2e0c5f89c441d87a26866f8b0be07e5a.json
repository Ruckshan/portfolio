{"ast":null,"code":"import readingTime from 'reading-time';\n\n/**\r\n * Serverless funciton for /api/posts.\r\n * Fetches posts from DEV.to with given params.\r\n */\nexport default (async (req, res) => {\n  try {\n    const post = await getPostById('');\n    res.status(200).json(post);\n  } catch (e) {\n    res.status(500).send('Internal Server Error.');\n  }\n});\n/**\r\n * Retrieves a list of articles from DEV.to for matching query params.\r\n * @param param of type {@link GetPostsProps}.\r\n */\n\nexport async function getPostById(id) {\n  console.log('\\nGetting post by id', id);\n  const headers = new Headers();\n  headers.append('2rv2CbHUgdG2zBLLeagjCQJE', process.env.DEV_TO_TOKEN);\n  console.log(process.env.DEV_TO_TOKEN);\n  const url = `https://dev.to/api/articles/${id}`;\n  console.log(url);\n  const response = await fetch(url //   {\n  //   headers\n  // }\n  );\n  const post = await response.json(); // This endpoints give tag_list as string,\n  // So populating it from tags which is an array.\n\n  console.log(post);\n  post.tag_list = post.tags;\n  post.readingTime = readingTime(post.body_markdown).text;\n  return post;\n}","map":null,"metadata":{},"sourceType":"module"}