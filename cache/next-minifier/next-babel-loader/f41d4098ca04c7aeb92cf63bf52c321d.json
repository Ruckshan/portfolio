{"ast":null,"code":"import { useState } from 'react';\nimport { API_URLS } from '../../constants';\n\n/**\r\n * Custom hook that fetches posts for a given page.\r\n * @param initialPosts The set of initial posts.\r\n * @param tag The tag to filter the posts by.\r\n * @param postsPerPage The number of posts per pave.\r\n */\nexport const usePosts = (initialPosts, tag = '', postsPerPage = 10) => {\n  const {\n    0: page,\n    1: setPage\n  } = useState(1);\n  const {\n    0: posts,\n    1: setPosts\n  } = useState(initialPosts);\n  const {\n    0: hasMore,\n    1: setHasMore\n  } = useState(posts.length >= postsPerPage);\n\n  const fetchMorePosts = async () => {\n    const params = new URLSearchParams({\n      page: String(page + 1),\n      per_page: String(postsPerPage),\n      tag\n    });\n    const url = `${API_URLS.POSTS}?${params}`;\n    console.log('Fetching more posts', url);\n    const response = await fetch(url);\n    const newPosts = await response.json();\n    setPosts([...posts, ...newPosts]);\n    setHasMore(newPosts.length >= postsPerPage);\n    setPage(page => page + 1);\n  };\n\n  return [posts, hasMore, fetchMorePosts];\n};","map":null,"metadata":{},"sourceType":"module"}