{"ast":null,"code":"import { useState } from 'react';\nimport { API_URLS } from '../../constants';\n\n/**\r\n * Custom hook that fetches nuggets for a given page.\r\n * @param initialNuggets The set of initial nuggets.\r\n * @param tag The tag to filter the nuggets by.\r\n * @param nuggetsPerPage The number of nuggets per pave.\r\n */\nexport const useNuggets = (initialNuggets, tag = '', nuggetsPerPage = 10) => {\n  const {\n    0: page,\n    1: setPage\n  } = useState(1);\n  const {\n    0: nuggets,\n    1: setNuggets\n  } = useState(initialNuggets);\n  const {\n    0: hasMore,\n    1: setHasMore\n  } = useState(nuggets.length >= nuggetsPerPage);\n\n  const fetchMoreNuggets = async () => {\n    const params = new URLSearchParams({\n      page: String(page + 1),\n      per_page: String(nuggetsPerPage),\n      tag\n    });\n    const url = `${API_URLS.NUGGETS}?${params}`;\n    console.log('Fetching more nuggets: ', url);\n    const response = await fetch(url);\n    const newNuggets = await response.json();\n    setNuggets([...nuggets, ...newNuggets]);\n    setHasMore(newNuggets.length >= nuggetsPerPage);\n    setPage(page => page + 1);\n  };\n\n  return [nuggets, hasMore, fetchMoreNuggets];\n};","map":null,"metadata":{},"sourceType":"module"}