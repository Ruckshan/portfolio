{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport { motion } from 'framer-motion';\nimport Head from 'next/head';\nimport Link from 'next/link';\nimport withPageTransition from '../../../components/hoc/with-page-transition';\nimport MdContent from '../../../components/md-content/MdContent';\nimport PageBody from '../../../components/page-body/PageBody';\nimport Page from '../../../components/page/Page';\nimport SocialShare from '../../../components/social-share/SocialShare.component';\nimport { formatDate } from '../../../lib';\nimport RelatedPostsSection from '../../../posts/related-posts-section/RelatedPostsSection.component';\nimport ShareSection from '../../../posts/share-section/ShareSection.component';\nimport { getPosts } from '../../api/posts';\nimport { getPostById } from '../../api/posts/[id]';\n/**\r\n * Placeholder animation variant for the header section.\r\n */\n\nconst headerVariants = {\n  initial: {\n    opacity: 0\n  },\n  enter: {\n    opacity: 1,\n    transition: {\n      staggerChildren: 0.5,\n      when: 'beforeChildren'\n    }\n  }\n};\n/**\r\n * Animation variants for the header children.\r\n */\n\nexport const headerChildrenVariants = {\n  initial: {\n    opacity: 0,\n    transform: 'translateY(50%)'\n  },\n  enter: {\n    opacity: 1,\n    transform: 'translateY(0%)',\n    transition: {\n      duration: 0.8,\n      ease: 'easeOut'\n    }\n  }\n};\n/**\r\n * Animation variants for the line after header.\r\n */\n\nconst hrVariants = {\n  initial: {\n    opacity: 0,\n    scale: 0\n  },\n  enter: {\n    opacity: 1,\n    scale: 1,\n    transition: {\n      delay: 1.2,\n      duration: 1,\n      ease: 'easeOut'\n    }\n  }\n};\n/**\r\n * Animation variants for the page content.\r\n */\n\nconst postContentVariants = {\n  initial: {\n    opacity: 0,\n    transform: 'translateY(2%)'\n  },\n  enter: {\n    opacity: 1,\n    transform: 'translateY(0%)',\n    transition: {\n      delay: 1.2,\n      duration: 1,\n      ease: 'easeOut'\n    }\n  }\n};\nexport const getStaticPaths = async () => {\n  try {\n    console.log('\\nRunning getStaticPaths for [slug]');\n    const posts = await getPosts({\n      per_page: '50'\n    });\n    const paths = posts.map(post => ({\n      params: {\n        id: String(post.id),\n        slug: post.slug\n      }\n    }));\n    console.log('\\nNumber of posts pre-rendered: ', posts.length);\n    return {\n      paths,\n      fallback: true\n    };\n  } catch (e) {\n    console.error('Error while fetching static paths for post: ', e);\n  }\n};\n/**\r\n * Props for {@link PostPage}.\r\n */\n\nexport const getStaticProps = async ({\n  params\n}) => {\n  try {\n    console.log('\\nRunning getStaticProps for post with id: ', params.id);\n    const post = await getPostById(params.id);\n    post.body_markdown = post.body_markdown.substring(post.body_markdown.lastIndexOf(post.description.substring(0, 10)));\n    return {\n      props: {\n        post\n      },\n      revalidate: 300\n    };\n  } catch (e) {\n    console.error('Error while fetching getStaticProps post by id: ', params.id, e);\n  }\n};\n/**\r\n * Represents the page for an instance of a blog post.\r\n */\n\nconst PostPage = ({\n  post = {}\n}) => {\n  return __jsx(Page, null, __jsx(Head, null, __jsx(\"title\", null, post.title), __jsx(\"meta\", {\n    property: \"og:title\",\n    content: post.title\n  }), __jsx(\"meta\", {\n    property: \"og:type\",\n    content: \"article\"\n  }), __jsx(\"meta\", {\n    property: \"og:url\",\n    content: `${process.env.NEXT_PUBLIC_FRONT_END_DOMAIN}/posts/${post.id}/${post.slug}`\n  }), __jsx(\"meta\", {\n    name: \"twitter:title\",\n    content: post.title\n  }), __jsx(\"meta\", {\n    name: \"twitter:description\",\n    content: post.description\n  })), __jsx(motion.div, {\n    className: \"text-center mb-8 lg:mb-16 overflow-hidden\",\n    variants: headerVariants\n  }, __jsx(motion.h1, {\n    className: \"font-black text-primary leading-tight mb-4\",\n    variants: headerChildrenVariants\n  }, post.title), __jsx(motion.div, {\n    className: \"font-bold text-lg lg:text-xl text-secondary\",\n    variants: headerChildrenVariants\n  }, __jsx(\"span\", null, formatDate(post.published_timestamp)), __jsx(\"span\", {\n    className: \"px-2\"\n  }, \"\\u2022\"), __jsx(\"span\", null, post.readingTime)), __jsx(motion.div, {\n    className: \"text-secondary-text text-md lg:text-lg mb-2 font-bold\",\n    variants: headerChildrenVariants\n  }, post.tag_list && post.tag_list.map(tag => {\n    return __jsx(Link, {\n      key: tag,\n      href: \"/posts/tag/[tag]\",\n      as: `/posts/tag/${tag}`\n    }, __jsx(\"a\", {\n      className: \"ul-hover-effect mr-2\"\n    }, \"#\", tag));\n  })), __jsx(motion.div, {\n    className: \"flex justify-center\",\n    variants: headerChildrenVariants\n  }, __jsx(SocialShare, {\n    item: post,\n    url: `${process.env.NEXT_PUBLIC_FRONT_END_DOMAIN}/posts/${post.id}/${post.slug}`\n  }))), __jsx(PageBody, null, __jsx(motion.div, {\n    className: \"bg-dark-light sm: mb-8\",\n    style: {\n      height: '1px'\n    },\n    variants: hrVariants\n  }), __jsx(motion.div, {\n    variants: postContentVariants\n  }, __jsx(MdContent, null, post.body_markdown)), __jsx(ShareSection, {\n    item: post\n  }), __jsx(RelatedPostsSection, {\n    tag: post.tag_list && post.tag_list[0]\n  })));\n};\n\nexport default withPageTransition(PostPage);","map":null,"metadata":{},"sourceType":"module"}